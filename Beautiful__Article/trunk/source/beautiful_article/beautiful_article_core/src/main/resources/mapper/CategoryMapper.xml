<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.damai.beautiful_article.core.dao.CategoryMapper">
    <sql id="column">category_name,data_state</sql>
    <resultMap id="categoryResultMap" type="Category">
        <id property="categoryId" column="category_id" />
        <result property="categoryName" column="category_name" />
        <result property="dataState" column="data_state" />

    </resultMap>
    <!-- 插入信息并返回主键id -->
    <insert id="save" parameterType="Category" useGeneratedKeys="true" keyProperty="category_id">
        INSERT INTO category  (category_name,data_state)   VALUES(#{categoryName},#{dataState})
    </insert>

    <!-- 更新 -->
    <update id="update" parameterType="Category">
        UPDATE category
        <set>
            <if test="categoryName != null" >category_name=#{categoryName},</if>
            <if test="dataState != null" >data_state=#{dataState},</if>
        </set>
        WHERE category_id=#{categoryId}
    </update>
    <!--根据id删除 -->
    <delete id="deleteById">
        DELETE FROM category WHERE category_id=#{categoryId}
    </delete>

    <!-- 根据id查询 -->
    <select id="findById" resultMap="categoryResultMap">
        SELECT categoryId,<include refid="column" />  FROM category WHERE category_id = #{categoryId} LIMIT  0,1
    </select>
</mapper>